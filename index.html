<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SargoGuru Total</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        table { border-collapse: collapse; width: 100%; table-layout: fixed; }
        td { border: 0.1px solid #ddd; text-align: center; font-size: 13px; height: 35px; font-weight: bold; }
        .label { background: #f1f5f9; font-size: 10px; color: #64748b; font-weight: bold; width: 65px; text-align: left; padding-left: 4px; }
        
        /* COLORES GURU */
        .v-1 { background-color: #ffffff; } .v-2 { background-color: #90ee90; } .v-4 { background-color: #ffa500; color: #fff; }
        .o-1 { background-color: #add8e6; } .o-2 { background-color: #4169e1; color: #fff; } .o-3 { background-color: #00008b; color: #fff; }
        .p-1 { background-color: #e0ffff; } .p-rojo { background-color: #ff0000; color: #fff; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="bg-slate-900 p-3 shadow-2xl">
        <div class="flex gap-2 mb-3">
            <input id="input-busqueda" type="text" placeholder="Busca zona (ej: Corrubedo)" class="flex-1 px-3 py-2 rounded text-sm outline-none">
            <button onclick="buscarZona()" class="bg-blue-600 text-white px-4 py-2 rounded font-bold text-sm">IR</button>
        </div>
        <div class="flex gap-2 overflow-x-auto pb-1 text-[10px]">
            <button onclick="cambiarZona('Arousa', 42.55, -8.95)" class="bg-slate-700 text-white px-3 py-1 rounded">AROSA</button>
            <button onclick="cambiarZona('Muros', 42.75, -9.05)" class="bg-slate-700 text-white px-3 py-1 rounded">MUROS</button>
            <button onclick="cambiarZona('Vigo', 42.23, -8.80)" class="bg-slate-700 text-white px-3 py-1 rounded">VIGO</button>
            <button onclick="miUbicacion()" class="bg-green-600 text-white px-3 py-1 rounded font-bold">üìç MI ZONA</button>
        </div>
    </div>

    <div class="w-full h-56 bg-black border-b border-slate-400">
        <iframe id="mapa" width="100%" height="100%" frameborder="0" src=""></iframe>
    </div>

    <div class="m-2 shadow-lg bg-white overflow-hidden rounded">
        <table>
            <tr id="fila-hora"></tr>
            <tr id="fila-ola"></tr>
            <tr id="fila-per"></tr>
            <tr id="fila-vnt"></tr>
        </table>
    </div>

    <div class="p-4 text-center">
        <p id="nombre-ubicacion" class="text-xs font-bold text-slate-500 uppercase tracking-widest">Analizando Costa...</p>
    </div>

    <script>
        function cambiarZona(nombre, lat, lon) {
            document.getElementById('nombre-ubicacion').innerText = "Coordenadas: " + lat + " / " + lon;
            document.getElementById('mapa').src = `https://maps.google.com/maps?q=${lat},${lon}&t=k&z=14&ie=UTF8&iwloc=&output=embed`;
            actualizarTabla();
        }

        function buscarZona() {
            const zona = document.getElementById('input-busqueda').value;
            if(zona) {
                document.getElementById('nombre-ubicacion').innerText = "Buscando: " + zona;
                document.getElementById('mapa').src = `https://maps.google.com/maps?q=${zona}&t=k&z=14&ie=UTF8&iwloc=&output=embed`;
                actualizarTabla();
            }
        }

        function miUbicacion() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    cambiarZona('Mi Posici√≥n', pos.coords.latitude, pos.coords.longitude);
                });
            }
        }

        function actualizarTabla() {
            const horas = ["09", "12", "15", "18", "21"];
            document.getElementById('fila-hora').innerHTML = '<td class="label">HORA</td>' + horas.map(h => `<td class="bg-slate-100">${h}h</td>`).join('');
            
            let htmlOla = '<td class="label">OLA (m)</td>';
            let htmlPer = '<td class="label">PER (s)</td>';
            let htmlVnt = '<td class="label">VNT (kn)</td>';

            horas.forEach(() => {
                const ola = (Math.random() * 1.5 + 0.5).toFixed(1);
                const per = Math.floor(Math.random() * 8 + 6);
                const vnt = Math.floor(Math.random() * 20);

                let clO = ola < 1 ? 'o-1' : (ola < 1.7 ? 'o-2' : 'o-3');
                let clP = per > 11 ? 'p-rojo' : 'p-1';
                let clV = vnt < 6 ? 'v-1' : (vnt < 14 ? 'v-2' : 'v-4');

                htmlOla += `<td class="${clO}">${ola}</td>`;
                htmlPer += `<td class="${clP}">${per}</td>`;
                htmlVnt += `<td class="${clV}">${vnt}</td>`;
            });

            document.getElementById('fila-ola').innerHTML = htmlOla;
            document.getElementById('fila-per').innerHTML = htmlPer;
            document.getElementById('fila-vnt').innerHTML = htmlVnt;
        }

        window.onload = () => cambiarZona('Arousa', 42.55, -8.95);
    </script>
</body>
</html>
